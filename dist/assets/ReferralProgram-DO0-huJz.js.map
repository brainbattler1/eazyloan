{"version":3,"file":"ReferralProgram-DO0-huJz.js","sources":["../../src/components/ReferralProgram.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../utils/supabase';\nimport './ReferralProgram.css';\n\nconst ReferralProgram = ({ onClose }) => {\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [referralStats, setReferralStats] = useState({\n    referral_code: '',\n    total_referrals: 0,\n    pending_referrals: 0,\n    completed_referrals: 0,\n    total_rewards: 0\n  });\n  const [referralHistory, setReferralHistory] = useState([]);\n  const [copySuccess, setCopySuccess] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (user) {\n      testDatabaseConnection();\n    }\n  }, [user]);\n\n  const testDatabaseConnection = async () => {\n    try {\n      // Test basic Supabase connection\n      const { data, error } = await supabase.from('referral_codes').select('count').limit(1);\n      if (error) {\n        console.warn('Database connection test failed:', error);\n        setError(`Database connection failed: ${error.message}`);\n        setLoading(false);\n        return;\n      }\n      \n      // If connection is good, fetch referral data\n      fetchReferralData();\n    } catch (error) {\n      console.error('Connection test error:', error);\n      setError('Unable to connect to database. Please check your internet connection.');\n      setLoading(false);\n    }\n  };\n\n  const fetchReferralData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Get referral stats\n      const { data: statsData, error: statsError } = await supabase\n        .rpc('get_user_referral_stats', { check_user_id: user.id });\n\n      if (statsError) throw statsError;\n\n      if (statsData && statsData.length > 0) {\n        setReferralStats(statsData[0]);\n      }\n\n      // Get referral history\n      const { data: historyData, error: historyError } = await supabase\n        .from('referrals')\n        .select(`\n          id,\n          status,\n          reward_amount,\n          reward_given,\n          created_at,\n          completed_at,\n          referred_id\n        `)\n        .eq('referrer_id', user.id)\n        .order('created_at', { ascending: false });\n\n      // Get user profiles for referred users separately\n      if (historyData && historyData.length > 0) {\n        const referredIds = historyData.map(r => r.referred_id);\n        const { data: profilesData } = await supabase\n          .from('user_profiles')\n          .select('user_id, first_name, last_name, username')\n          .in('user_id', referredIds);\n        \n        // Merge profile data with referral history\n        const profileMap = new Map(profilesData?.map(p => [p.user_id, p]) || []);\n        historyData.forEach(referral => {\n          const profile = profileMap.get(referral.referred_id);\n          referral.user_profiles = profile || null;\n        });\n      }\n\n      if (historyError) throw historyError;\n\n      setReferralHistory(historyData || []);\n    } catch (error) {\n      console.error('Error fetching referral data:', error);\n      \n      // Provide more specific error messages\n      let errorMessage = 'Failed to load referral data';\n      \n      if (error.message?.includes('function get_user_referral_stats')) {\n        errorMessage = 'Referral system not properly initialized. Please contact support.';\n      } else if (error.message?.includes('relation \"referral_codes\" does not exist')) {\n        errorMessage = 'Referral database tables not found. Please run database migrations.';\n      } else if (error.message?.includes('relation \"user_profiles\" does not exist')) {\n        errorMessage = 'User profiles table not found. Please run database migrations.';\n      } else if (error.message?.includes('JWT')) {\n        errorMessage = 'Authentication error. Please log in again.';\n      } else if (error.message?.includes('permission denied')) {\n        errorMessage = 'Permission denied. Please check your account status.';\n      } else if (error.message) {\n        errorMessage = `Error: ${error.message}`;\n      }\n      \n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getReferralLink = () => {\n    // Use environment variable for deployed domain, fallback to current origin for development\n    const baseUrl = import.meta.env.VITE_APP_DOMAIN || window.location.origin;\n    // Ensure we have a valid referral code\n    if (!referralStats?.referral_code) {\n      console.warn('No referral code available');\n      return `${baseUrl}/?ref=`;\n    }\n    return `${baseUrl}/?ref=${referralStats.referral_code}`;\n  };\n\n  const copyReferralLink = async () => {\n    try {\n      await navigator.clipboard.writeText(getReferralLink());\n      setCopySuccess(true);\n      setTimeout(() => setCopySuccess(false), 2000);\n    } catch (error) {\n      console.error('Failed to copy link:', error);\n      // Fallback for older browsers\n      const textArea = document.createElement('textarea');\n      textArea.value = getReferralLink();\n      document.body.appendChild(textArea);\n      textArea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textArea);\n      setCopySuccess(true);\n      setTimeout(() => setCopySuccess(false), 2000);\n    }\n  };\n\n  const shareReferralLink = async (platform) => {\n    const link = getReferralLink();\n    const message = `Join me on EazyLoans and get started with your loan application! Use my referral link: ${link}`;\n\n    switch (platform) {\n      case 'whatsapp':\n        window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');\n        break;\n      case 'telegram':\n        window.open(`https://t.me/share/url?url=${encodeURIComponent(link)}&text=${encodeURIComponent('Join me on EazyLoans!')}`, '_blank');\n        break;\n      case 'twitter':\n        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(message)}`, '_blank');\n        break;\n      case 'facebook':\n        window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(link)}`, '_blank');\n        break;\n      case 'email':\n        window.open(`mailto:?subject=${encodeURIComponent('Join EazyLoans!')}&body=${encodeURIComponent(message)}`, '_blank');\n        break;\n      default:\n        copyReferralLink();\n    }\n  };\n\n  const getStatusBadge = (status) => {\n    const badges = {\n      pending: { text: 'Pending', class: 'status-pending', icon: '‚è≥' },\n      completed: { text: 'Completed', class: 'status-completed', icon: '‚úÖ' },\n      cancelled: { text: 'Cancelled', class: 'status-cancelled', icon: '‚ùå' }\n    };\n    return badges[status] || badges.pending;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"referral-program\">\n        <div className=\"referral-header\">\n          <h2>üéÅ Referral Program</h2>\n          <button onClick={onClose} className=\"close-btn\">√ó</button>\n        </div>\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading referral data...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"referral-program\">\n        <div className=\"referral-header\">\n          <h2>üéÅ Referral Program</h2>\n          <button onClick={onClose} className=\"close-btn\">√ó</button>\n        </div>\n        <div className=\"error-container\">\n          <div className=\"error-icon\">‚ö†Ô∏è</div>\n          <h3>Error Loading Referral Data</h3>\n          <p>{error}</p>\n          <button onClick={fetchReferralData} className=\"retry-btn\">\n            üîÑ Try Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"referral-program\">\n      <div className=\"referral-header\">\n        <h2>üéÅ Referral Program</h2>\n        <button onClick={onClose} className=\"close-btn\">√ó</button>\n      </div>\n\n      {/* Referral Stats */}\n      <div className=\"referral-stats\">\n        <div className=\"stats-grid\">\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\">üë•</div>\n            <div className=\"stat-content\">\n              <div className=\"stat-number\">{referralStats.total_referrals}</div>\n              <div className=\"stat-label\">Total Referrals</div>\n            </div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\">‚è≥</div>\n            <div className=\"stat-content\">\n              <div className=\"stat-number\">{referralStats.pending_referrals}</div>\n              <div className=\"stat-label\">Pending</div>\n            </div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\">‚úÖ</div>\n            <div className=\"stat-content\">\n              <div className=\"stat-number\">{referralStats.completed_referrals}</div>\n              <div className=\"stat-label\">Completed</div>\n            </div>\n          </div>\n          <div className=\"stat-card\">\n            <div className=\"stat-icon\">üí∞</div>\n            <div className=\"stat-content\">\n              <div className=\"stat-number\">${(referralStats.total_rewards || 0).toLocaleString()}</div>\n              <div className=\"stat-label\">Total Rewards</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Referral Link Section */}\n      <div className=\"referral-link-section\">\n        <h3>üìé Your Referral Link</h3>\n        <div className=\"referral-link-container\">\n          <div className=\"referral-code-display\">\n            <span className=\"code-label\">Your Code:</span>\n            <span className=\"referral-code\">{referralStats.referral_code}</span>\n          </div>\n          <div className=\"link-input-container\">\n            <input\n              type=\"text\"\n              value={getReferralLink()}\n              readOnly\n              className=\"referral-link-input\"\n            />\n            <button\n              onClick={copyReferralLink}\n              className={`copy-btn ${copySuccess ? 'copied' : ''}`}\n            >\n              {copySuccess ? '‚úÖ Copied!' : 'üìã Copy'}\n            </button>\n          </div>\n        </div>\n\n        {/* Share Buttons */}\n        <div className=\"share-section\">\n          <h4>üì¢ Share Your Link</h4>\n          <div className=\"share-buttons\">\n            <button onClick={() => shareReferralLink('whatsapp')} className=\"share-btn whatsapp\">\n              üì± WhatsApp\n            </button>\n            <button onClick={() => shareReferralLink('telegram')} className=\"share-btn telegram\">\n              ‚úàÔ∏è Telegram\n            </button>\n            <button onClick={() => shareReferralLink('twitter')} className=\"share-btn twitter\">\n              üê¶ Twitter\n            </button>\n            <button onClick={() => shareReferralLink('facebook')} className=\"share-btn facebook\">\n              üìò Facebook\n            </button>\n            <button onClick={() => shareReferralLink('email')} className=\"share-btn email\">\n              üìß Email\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* How It Works */}\n      <div className=\"how-it-works\">\n        <h3>üéØ How It Works</h3>\n        <div className=\"steps\">\n          <div className=\"step\">\n            <div className=\"step-number\">1</div>\n            <div className=\"step-content\">\n              <h4>Share Your Link</h4>\n              <p>Send your unique referral link to friends and family</p>\n            </div>\n          </div>\n          <div className=\"step\">\n            <div className=\"step-number\">2</div>\n            <div className=\"step-content\">\n              <h4>They Sign Up</h4>\n              <p>When someone clicks your link and creates an account</p>\n            </div>\n          </div>\n          <div className=\"step\">\n            <div className=\"step-number\">3</div>\n            <div className=\"step-content\">\n              <h4>Earn Rewards</h4>\n              <p>Get $10 for each successful referral</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Referral History */}\n      {referralHistory.length > 0 && (\n        <div className=\"referral-history\">\n          <h3>üìã Referral History</h3>\n          <div className=\"history-list\">\n            {referralHistory.map((referral) => {\n              const badge = getStatusBadge(referral.status);\n              const referredUser = referral.user_profiles;\n              const userName = referredUser \n                ? `${referredUser.first_name || ''} ${referredUser.last_name || ''}`.trim() || referredUser.username\n                : 'Unknown User';\n\n              return (\n                <div key={referral.id} className=\"history-item\">\n                  <div className=\"history-user\">\n                    <div className=\"user-avatar\">\n                      {userName.charAt(0).toUpperCase()}\n                    </div>\n                    <div className=\"user-info\">\n                      <div className=\"user-name\">{userName}</div>\n                      <div className=\"referral-date\">\n                        {new Date(referral.created_at).toLocaleDateString()}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"history-status\">\n                    <span className={`status-badge ${badge.class}`}>\n                      {badge.icon} {badge.text}\n                    </span>\n                    {referral.reward_given && (\n                      <div className=\"reward-amount\">\n                        +${(referral.reward_amount || 0).toLocaleString()}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {referralHistory.length === 0 && (\n        <div className=\"empty-history\">\n          <div className=\"empty-icon\">üë•</div>\n          <h3>No Referrals Yet</h3>\n          <p>Start sharing your referral link to earn rewards!</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ReferralProgram;"],"names":["ReferralProgram","onClose","user","useAuth","loading","setLoading","useState","referralStats","setReferralStats","referralHistory","setReferralHistory","copySuccess","setCopySuccess","error","setError","useEffect","testDatabaseConnection","data","supabase","fetchReferralData","statsData","statsError","historyData","historyError","referredIds","r","profilesData","profileMap","p","referral","profile","errorMessage","getReferralLink","baseUrl","copyReferralLink","textArea","shareReferralLink","platform","link","message","getStatusBadge","status","badges","jsxs","jsx","badge","referredUser","userName"],"mappings":"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"}