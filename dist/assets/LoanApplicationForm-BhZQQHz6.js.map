{"version":3,"file":"LoanApplicationForm-BhZQQHz6.js","sources":["../../src/components/LoanApplicationForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { supabase } from '../utils/supabase';\r\nimport './LoanApplicationForm.css';\r\n\r\nconst LoanApplicationForm = ({ onClose }) => {\r\n  const { user } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    // Personal Information\r\n    firstName: '',\r\n    lastName: '',\r\n    email: user?.email || '',\r\n    idNumber: '',\r\n    passportNumber: '',\r\n    gender: '',\r\n    dateOfBirth: '',\r\n    placeOfResidence: '',\r\n    detailedAddress: '',\r\n    // Contact & Employment\r\n    phoneNumber: '',\r\n    alternatePhone: '',\r\n    workType: '',\r\n    monthlyIncome: '',\r\n    employmentStatus: '',\r\n    creditScore: '',\r\n    // References\r\n    reference1FirstName: '',\r\n    reference1LastName: '',\r\n    reference1Phone: '',\r\n    reference1Gender: '',\r\n    reference1Relationship: '',\r\n    reference2FirstName: '',\r\n    reference2LastName: '',\r\n    reference2Phone: '',\r\n    reference2Gender: '',\r\n    reference2Relationship: '',\r\n    // Documents & Loan Details\r\n    idCardFront: null,\r\n    idCardBack: null,\r\n    passport: null,\r\n    loanAmount: '',\r\n    loanPurpose: '',\r\n    repaymentPeriod: '30',\r\n    termMonths: '1',\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [submitted, setSubmitted] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [currentSection, setCurrentSection] = useState('personal');\r\n\r\n  // Debug effect to monitor income field changes\r\n  useEffect(() => {\r\n    if (formData.monthlyIncome) {\r\n      console.log('Monthly income value updated:', formData.monthlyIncome);\r\n    }\r\n  }, [formData.monthlyIncome]);\r\n\r\n  // Handle input changes\r\n  const handleChange = (e) => {\r\n    const { name, value, type, files } = e.target;\r\n    \r\n    // Debug logging for income field\r\n    if (name === 'monthlyIncome') {\r\n      console.log('Monthly income field changed:', { name, value, type });\r\n    }\r\n    \r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: type === 'file' ? files[0] : value,\r\n    }));\r\n    setError(''); // Clear error when user starts typing\r\n  };\r\n\r\n  // Handle file upload specifically to prevent form submission\r\n  const handleFileChange = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const { name, files } = e.target;\r\n    if (files && files[0]) {\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        [name]: files[0],\r\n      }));\r\n      setError(''); // Clear error when user uploads file\r\n    }\r\n  };\r\n\r\n  // File upload helper\r\n  const uploadFile = async (file, fileName) => {\r\n    if (!file) return null;\r\n    const fileExt = file.name.split('.').pop();\r\n    const filePath = `${user.id}/${fileName}.${fileExt}`;\r\n    const { error: uploadError } = await supabase.storage\r\n      .from('loan-documents')\r\n      .upload(filePath, file, { cacheControl: '3600', upsert: true });\r\n    if (uploadError) throw uploadError;\r\n    const { data: { publicUrl } } = supabase.storage\r\n      .from('loan-documents')\r\n      .getPublicUrl(filePath);\r\n    return publicUrl;\r\n  };\r\n\r\n  // Validation\r\n  const validateForm = () => {\r\n    const requiredFields = [\r\n      'firstName', 'lastName', 'email', 'idNumber', 'gender', 'dateOfBirth',\r\n      'placeOfResidence', 'detailedAddress', 'phoneNumber', 'workType', 'monthlyIncome',\r\n      'employmentStatus',\r\n      'reference1FirstName', 'reference1LastName', 'reference1Phone', 'reference1Gender', 'reference1Relationship',\r\n      'reference2FirstName', 'reference2LastName', 'reference2Phone', 'reference2Gender', 'reference2Relationship',\r\n      'loanAmount', 'loanPurpose', 'repaymentPeriod', 'termMonths'\r\n    ];\r\n\r\n    for (const field of requiredFields) {\r\n      if (!formData[field]) {\r\n        setError(`Please fill in the ${field.replace(/([A-Z])/g, ' $1').toLowerCase()} field.`);\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (!formData.idCardFront || !formData.idCardBack) {\r\n      setError('Please upload both front and back of your ID card.');\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  // Submit handler\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!validateForm()) return;\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    // Small delay to prevent rapid submissions and reduce race conditions\r\n    await new Promise(resolve => setTimeout(resolve, 50));\r\n\r\n    try {\r\n      // Upload files\r\n      const idCardFrontUrl = await uploadFile(formData.idCardFront, 'id_card_front');\r\n      const idCardBackUrl = await uploadFile(formData.idCardBack, 'id_card_back');\r\n      const passportUrl = await uploadFile(formData.passport, 'passport');\r\n\r\n      // Prepare data\r\n      const applicationData = {\r\n        user_id: user.id,\r\n        user_email: user.email,\r\n        user_name: `${formData.firstName} ${formData.lastName}`,\r\n        first_name: formData.firstName,\r\n        last_name: formData.lastName,\r\n        id_number: formData.idNumber,\r\n        passport_number: formData.passportNumber || null,\r\n        gender: formData.gender,\r\n        date_of_birth: formData.dateOfBirth,\r\n        place_of_residence: formData.placeOfResidence,\r\n        detailed_address: formData.detailedAddress,\r\n        phone_number: formData.phoneNumber,\r\n        alternate_phone: formData.alternatePhone || null,\r\n        work_type: formData.workType,\r\n        monthly_income: parseFloat(formData.monthlyIncome),\r\n        employment_status: formData.employmentStatus || formData.workType,\r\n        credit_score: formData.creditScore ? parseInt(formData.creditScore) : null,\r\n        reference1_first_name: formData.reference1FirstName,\r\n        reference1_last_name: formData.reference1LastName,\r\n        reference1_phone: formData.reference1Phone,\r\n        reference1_gender: formData.reference1Gender,\r\n        reference1_relationship: formData.reference1Relationship,\r\n        reference2_first_name: formData.reference2FirstName,\r\n        reference2_last_name: formData.reference2LastName,\r\n        reference2_phone: formData.reference2Phone,\r\n        reference2_gender: formData.reference2Gender,\r\n        reference2_relationship: formData.reference2Relationship,\r\n        id_card_front_url: idCardFrontUrl,\r\n        id_card_back_url: idCardBackUrl,\r\n        passport_url: passportUrl,\r\n        amount: parseFloat(formData.loanAmount),\r\n        loan_amount_kes: parseFloat(formData.loanAmount),\r\n        purpose: formData.loanPurpose,\r\n        repayment_period_days: parseInt(formData.repaymentPeriod),\r\n        term_months: parseInt(formData.termMonths),\r\n        status: 'pending',\r\n        pdf_generated: false,\r\n      };\r\n\r\n      // Retry logic for handling potential conflicts\r\n      let retryCount = 0;\r\n      const maxRetries = 3;\r\n      let success = false;\r\n\r\n      while (!success && retryCount < maxRetries) {\r\n        try {\r\n          const { error: dbError } = await supabase\r\n            .from('loan_applications')\r\n            .insert([applicationData]);\r\n\r\n          if (dbError) {\r\n            // If it's a duplicate key error, wait a bit and retry\r\n            if (dbError.code === '23505' && retryCount < maxRetries - 1) {\r\n              retryCount++;\r\n              await new Promise(resolve => setTimeout(resolve, 100 + Math.random() * 200));\r\n              continue;\r\n            }\r\n            throw dbError;\r\n          }\r\n          \r\n          success = true;\r\n          setSubmitted(true);\r\n        } catch (retryError) {\r\n          if (retryCount === maxRetries - 1) {\r\n            throw retryError;\r\n          }\r\n          retryCount++;\r\n          await new Promise(resolve => setTimeout(resolve, 100 + Math.random() * 200));\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Loan application submission error:', err);\r\n      if (err.code === '23505') {\r\n        setError('There was a conflict with your application. Please try submitting again.');\r\n      } else {\r\n        setError(err.message || 'Submission failed. Please try again.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Section navigation\r\n  const sections = [\r\n    { id: 'personal', title: 'Personal Info', icon: 'üë§' },\r\n    { id: 'contact', title: 'Contact & Work', icon: 'üìû' },\r\n    { id: 'references', title: 'References', icon: 'üë•' },\r\n    { id: 'documents', title: 'Documents', icon: 'üìÑ' },\r\n    { id: 'loan', title: 'Loan Details', icon: 'üí∞' }\r\n  ];\r\n\r\n  const scrollToSection = (sectionId) => {\r\n    setCurrentSection(sectionId);\r\n    const element = document.getElementById(sectionId);\r\n    if (element) {\r\n      element.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n    }\r\n  };\r\n\r\n  if (submitted) {\r\n    return (\r\n      <div className=\"loan-form-container\">\r\n        <div className=\"success-screen\">\r\n          <div className=\"success-animation\">\r\n            <div className=\"checkmark\">‚úì</div>\r\n          </div>\r\n          <h2>Application Submitted Successfully!</h2>\r\n          <p>Your loan application has been received and is being reviewed. We'll contact you within 24 hours.</p>\r\n          <button className=\"primary-btn\" onClick={onClose}>\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"loan-form-container\">\r\n      <div className=\"form-header\">\r\n        <button className=\"close-btn\" onClick={onClose} aria-label=\"Close\">\r\n          √ó\r\n        </button>\r\n        <h1>Quick Loan Application</h1>\r\n        <p>Complete all sections to apply for your loan</p>\r\n      </div>\r\n\r\n      {/* Navigation Pills */}\r\n      <div className=\"section-nav\">\r\n        {sections.map((section) => (\r\n          <button\r\n            key={section.id}\r\n            className={`nav-pill ${currentSection === section.id ? 'active' : ''}`}\r\n            onClick={() => scrollToSection(section.id)}\r\n          >\r\n            <span className=\"nav-icon\">{section.icon}</span>\r\n            <span className=\"nav-text\">{section.title}</span>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <form className=\"loan-form\" onSubmit={handleSubmit}>\r\n        {error && (\r\n          <div className=\"error-alert\">\r\n            <span className=\"error-icon\">‚ö†Ô∏è</span>\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {/* Personal Information Section */}\r\n        <section id=\"personal\" className=\"form-section\">\r\n          <div className=\"section-header\">\r\n            <h2>üë§ Personal Information</h2>\r\n            <p>Tell us about yourself</p>\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"firstName\">First Name *</label>\r\n            <input\r\n              id=\"firstName\"\r\n              name=\"firstName\"\r\n              type=\"text\"\r\n              value={formData.firstName}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter your first name\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"lastName\">Last Name *</label>\r\n            <input\r\n              id=\"lastName\"\r\n              name=\"lastName\"\r\n              type=\"text\"\r\n              value={formData.lastName}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter your last name\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"email\">Email Address *</label>\r\n            <input\r\n              id=\"email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n              placeholder=\"your.email@example.com\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"idNumber\">ID Card Number *</label>\r\n            <input\r\n              id=\"idNumber\"\r\n              name=\"idNumber\"\r\n              type=\"text\"\r\n              value={formData.idNumber}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter your ID number\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"passportNumber\">Passport Number (Optional)</label>\r\n            <input\r\n              id=\"passportNumber\"\r\n              name=\"passportNumber\"\r\n              type=\"text\"\r\n              value={formData.passportNumber}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter passport number if available\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"gender\">Gender *</label>\r\n            <select\r\n              id=\"gender\"\r\n              name=\"gender\"\r\n              value={formData.gender}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"\">Select your gender</option>\r\n              <option value=\"male\">Male</option>\r\n              <option value=\"female\">Female</option>\r\n              <option value=\"other\">Other</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"dateOfBirth\">Date of Birth *</label>\r\n            <input\r\n              id=\"dateOfBirth\"\r\n              name=\"dateOfBirth\"\r\n              type=\"date\"\r\n              value={formData.dateOfBirth}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"placeOfResidence\">Place of Residence *</label>\r\n            <input\r\n              id=\"placeOfResidence\"\r\n              name=\"placeOfResidence\"\r\n              type=\"text\"\r\n              value={formData.placeOfResidence}\r\n              onChange={handleChange}\r\n              placeholder=\"City, County\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"detailedAddress\">Detailed Address *</label>\r\n            <textarea\r\n              id=\"detailedAddress\"\r\n              name=\"detailedAddress\"\r\n              value={formData.detailedAddress}\r\n              onChange={handleChange}\r\n              placeholder=\"Street address, building, apartment number\"\r\n              rows={3}\r\n              required\r\n            />\r\n          </div>\r\n        </section>\r\n\r\n        {/* Contact & Employment Section */}\r\n        <section id=\"contact\" className=\"form-section\">\r\n          <div className=\"section-header\">\r\n            <h2>üìû Contact & Employment</h2>\r\n            <p>How can we reach you and your work details</p>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"phoneNumber\">M-Pesa Phone Number *</label>\r\n            <input\r\n              id=\"phoneNumber\"\r\n              name=\"phoneNumber\"\r\n              type=\"tel\"\r\n              value={formData.phoneNumber}\r\n              onChange={handleChange}\r\n              placeholder=\"0712345678\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"alternatePhone\">Alternate Phone Number</label>\r\n            <input\r\n              id=\"alternatePhone\"\r\n              name=\"alternatePhone\"\r\n              type=\"tel\"\r\n              value={formData.alternatePhone}\r\n              onChange={handleChange}\r\n              placeholder=\"0712345678 (optional)\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"workType\">Type of Work *</label>\r\n            <input\r\n              id=\"workType\"\r\n              name=\"workType\"\r\n              type=\"text\"\r\n              value={formData.workType}\r\n              onChange={handleChange}\r\n              placeholder=\"e.g., Teacher, Driver, Business Owner\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"employmentStatus\">Employment Status *</label>\r\n            <select\r\n              id=\"employmentStatus\"\r\n              name=\"employmentStatus\"\r\n              value={formData.employmentStatus}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"\">Select employment status</option>\r\n              <option value=\"employed\">Employed</option>\r\n              <option value=\"self_employed\">Self Employed</option>\r\n              <option value=\"business_owner\">Business Owner</option>\r\n              <option value=\"freelancer\">Freelancer</option>\r\n              <option value=\"student\">Student</option>\r\n              <option value=\"retired\">Retired</option>\r\n              <option value=\"unemployed\">Unemployed</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"creditScore\">Credit Score (Optional)</label>\r\n            <input\r\n              id=\"creditScore\"\r\n              name=\"creditScore\"\r\n              type=\"number\"\r\n              value={formData.creditScore}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter your credit score (300-850)\"\r\n              min=\"300\"\r\n              max=\"850\"\r\n            />\r\n            <small className=\"field-hint\">If you know your credit score, it helps us process your application faster</small>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"monthlyIncome\">Monthly Income (KES) *</label>\r\n            <div className=\"input-with-clear\">\r\n              <input\r\n                id=\"monthlyIncome\"\r\n                name=\"monthlyIncome\"\r\n                type=\"number\"\r\n                value={formData.monthlyIncome}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter your monthly income (e.g., 50000)\"\r\n                min=\"1000\"\r\n                step=\"1000\"\r\n                autoComplete=\"off\"\r\n                required\r\n              />\r\n              {formData.monthlyIncome && (\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"clear-btn\"\r\n                  onClick={() => setFormData(prev => ({ ...prev, monthlyIncome: '' }))}\r\n                  title=\"Clear income field\"\r\n                >\r\n                  √ó\r\n                </button>\r\n              )}\r\n            </div>\r\n            <small className=\"field-hint\">Enter your actual monthly income in Kenyan Shillings</small>\r\n            {formData.monthlyIncome && parseFloat(formData.monthlyIncome) < 1000 && (\r\n              <small className=\"field-error\">Income must be at least KES 1,000</small>\r\n            )}\r\n          </div>\r\n        </section>\r\n\r\n        {/* References Section */}\r\n        <section id=\"references\" className=\"form-section\">\r\n          <div className=\"section-header\">\r\n            <h2>üë• References</h2>\r\n            <p>Provide two people who can vouch for you</p>\r\n          </div>\r\n\r\n          <div className=\"reference-group\">\r\n            <h3>Reference 1</h3>\r\n            \r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reference1FirstName\">First Name *</label>\r\n              <input\r\n                id=\"reference1FirstName\"\r\n                name=\"reference1FirstName\"\r\n                type=\"text\"\r\n                value={formData.reference1FirstName}\r\n                onChange={handleChange}\r\n                placeholder=\"Reference first name\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reference1LastName\">Last Name *</label>\r\n              <input\r\n                id=\"reference1LastName\"\r\n                name=\"reference1LastName\"\r\n                type=\"text\"\r\n                value={formData.reference1LastName}\r\n                onChange={handleChange}\r\n                placeholder=\"Reference last name\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reference1Phone\">Phone Number *</label>\r\n              <input\r\n                id=\"reference1Phone\"\r\n                name=\"reference1Phone\"\r\n                type=\"tel\"\r\n                value={formData.reference1Phone}\r\n                onChange={handleChange}\r\n                placeholder=\"0712345678\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reference1Gender\">Gender *</label>\r\n              <select\r\n                id=\"reference1Gender\"\r\n                name=\"reference1Gender\"\r\n                value={formData.reference1Gender}\r\n                onChange={handleChange}\r\n                required\r\n              >\r\n                <option value=\"\">Select gender</option>\r\n                <option value=\"male\">Male</option>\r\n                <option value=\"female\">Female</option>\r\n                <option value=\"other\">Other</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reference1Relationship\">Relationship *</label>\r\n              <input\r\n                id=\"reference1Relationship\"\r\n                name=\"reference1Relationship\"\r\n                type=\"text\"\r\n                value={formData.reference1Relationship}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., Friend, Colleague, Family\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"reference-group\">\r\n            <h3>Reference 2</h3>\r\n            \r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reference2FirstName\">First Name *</label>\r\n              <input\r\n                id=\"reference2FirstName\"\r\n                name=\"reference2FirstName\"\r\n                type=\"text\"\r\n                value={formData.reference2FirstName}\r\n                onChange={handleChange}\r\n                placeholder=\"Reference first name\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reference2LastName\">Last Name *</label>\r\n              <input\r\n                id=\"reference2LastName\"\r\n                name=\"reference2LastName\"\r\n                type=\"text\"\r\n                value={formData.reference2LastName}\r\n                onChange={handleChange}\r\n                placeholder=\"Reference last name\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reference2Phone\">Phone Number *</label>\r\n              <input\r\n                id=\"reference2Phone\"\r\n                name=\"reference2Phone\"\r\n                type=\"tel\"\r\n                value={formData.reference2Phone}\r\n                onChange={handleChange}\r\n                placeholder=\"0712345678\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reference2Gender\">Gender *</label>\r\n              <select\r\n                id=\"reference2Gender\"\r\n                name=\"reference2Gender\"\r\n                value={formData.reference2Gender}\r\n                onChange={handleChange}\r\n                required\r\n              >\r\n                <option value=\"\">Select gender</option>\r\n                <option value=\"male\">Male</option>\r\n                <option value=\"female\">Female</option>\r\n                <option value=\"other\">Other</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"reference2Relationship\">Relationship *</label>\r\n              <input\r\n                id=\"reference2Relationship\"\r\n                name=\"reference2Relationship\"\r\n                type=\"text\"\r\n                value={formData.reference2Relationship}\r\n                onChange={handleChange}\r\n                placeholder=\"e.g., Friend, Colleague, Family\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Documents Section */}\r\n        <section id=\"documents\" className=\"form-section\">\r\n          <div className=\"section-header\">\r\n            <h2>üìÑ Documents</h2>\r\n            <p>Upload required identification documents</p>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"idCardFront\">ID Card Front *</label>\r\n            <div className=\"file-upload\">\r\n              <input\r\n                id=\"idCardFront\"\r\n                name=\"idCardFront\"\r\n                type=\"file\"\r\n                accept=\"image/*,application/pdf\"\r\n                onChange={handleFileChange}\r\n                className=\"file-input\"\r\n                required\r\n              />\r\n              <label htmlFor=\"idCardFront\" className=\"file-label\" onClick={(e) => e.stopPropagation()}>\r\n                <span className=\"file-icon\">üì∑</span>\r\n                <span className=\"file-text\">\r\n                  {formData.idCardFront ? formData.idCardFront.name : 'Take Photo or Upload ID Front'}\r\n                </span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"idCardBack\">ID Card Back *</label>\r\n            <div className=\"file-upload\">\r\n              <input\r\n                id=\"idCardBack\"\r\n                name=\"idCardBack\"\r\n                type=\"file\"\r\n                accept=\"image/*,application/pdf\"\r\n                onChange={handleFileChange}\r\n                className=\"file-input\"\r\n                required\r\n              />\r\n              <label htmlFor=\"idCardBack\" className=\"file-label\" onClick={(e) => e.stopPropagation()}>\r\n                <span className=\"file-icon\">üì∑</span>\r\n                <span className=\"file-text\">\r\n                  {formData.idCardBack ? formData.idCardBack.name : 'Take Photo or Upload ID Back'}\r\n                </span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"passport\">Passport (Optional)</label>\r\n            <div className=\"file-upload\">\r\n              <input\r\n                id=\"passport\"\r\n                name=\"passport\"\r\n                type=\"file\"\r\n                accept=\"image/*,application/pdf\"\r\n                onChange={handleFileChange}\r\n                className=\"file-input\"\r\n              />\r\n              <label htmlFor=\"passport\" className=\"file-label\" onClick={(e) => e.stopPropagation()}>\r\n                <span className=\"file-icon\">üìÑ</span>\r\n                <span className=\"file-text\">\r\n                  {formData.passport ? formData.passport.name : 'Upload Passport (Optional)'}\r\n                </span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Loan Details Section */}\r\n        <section id=\"loan\" className=\"form-section\">\r\n          <div className=\"section-header\">\r\n            <h2>üí∞ Loan Details</h2>\r\n            <p>Specify your loan requirements</p>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"loanAmount\">Loan Amount (KES) *</label>\r\n            <input\r\n              id=\"loanAmount\"\r\n              name=\"loanAmount\"\r\n              type=\"number\"\r\n              value={formData.loanAmount}\r\n              onChange={handleChange}\r\n              placeholder=\"50000\"\r\n              min=\"5000\"\r\n              max=\"5000000\"\r\n              step=\"100\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"loanPurpose\">Loan Purpose *</label>\r\n            <select\r\n              id=\"loanPurpose\"\r\n              name=\"loanPurpose\"\r\n              value={formData.loanPurpose}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"\">Select loan purpose</option>\r\n              <option value=\"business\">Business</option>\r\n              <option value=\"education\">Education</option>\r\n              <option value=\"medical\">Medical</option>\r\n              <option value=\"home_improvement\">Home Improvement</option>\r\n              <option value=\"debt_consolidation\">Debt Consolidation</option>\r\n              <option value=\"emergency\">Emergency</option>\r\n              <option value=\"other\">Other</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"termMonths\">Loan Term (Months) *</label>\r\n            <select\r\n              id=\"termMonths\"\r\n              name=\"termMonths\"\r\n              value={formData.termMonths}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"1\">1 month</option>\r\n              <option value=\"2\">2 months</option>\r\n              <option value=\"3\">3 months</option>\r\n              <option value=\"6\">6 months</option>\r\n              <option value=\"12\">12 months</option>\r\n              <option value=\"24\">24 months</option>\r\n              <option value=\"36\">36 months</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"repaymentPeriod\">Repayment Period (Days) *</label>\r\n            <select\r\n              id=\"repaymentPeriod\"\r\n              name=\"repaymentPeriod\"\r\n              value={formData.repaymentPeriod}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"7\">7 days</option>\r\n              <option value=\"14\">14 days</option>\r\n              <option value=\"30\">30 days</option>\r\n              <option value=\"45\">45 days</option>\r\n              <option value=\"60\">60 days</option>\r\n              <option value=\"90\">90 days</option>\r\n            </select>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Submit Button */}\r\n        <div className=\"form-actions\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"submit-btn\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <span className=\"spinner\"></span>\r\n                Submitting...\r\n              </>\r\n            ) : (\r\n              'Submit Application'\r\n            )}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoanApplicationForm;"],"names":["LoanApplicationForm","onClose","user","useAuth","formData","setFormData","useState","loading","setLoading","submitted","setSubmitted","error","setError","currentSection","setCurrentSection","useEffect","handleChange","e","name","value","type","files","prev","handleFileChange","uploadFile","file","fileName","fileExt","filePath","uploadError","supabase","publicUrl","validateForm","requiredFields","field","handleSubmit","resolve","idCardFrontUrl","idCardBackUrl","passportUrl","applicationData","retryCount","maxRetries","success","dbError","retryError","err","sections","scrollToSection","sectionId","element","jsxs","jsx","section","Fragment"],"mappings":"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"}