{"version":3,"file":"LoanCalculator-BFgbOfqw.js","sources":["../../src/components/LoanCalculator.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { supabase } from '../utils/supabase';\n\nconst LoanCalculator = ({ onClose }) => {\n  const { user } = useAuth();\n  const [calculatorData, setCalculatorData] = useState({\n    loanAmount: '',\n    interestRate: '12',\n    termMonths: '12',\n    loanPurpose: 'personal'\n  });\n  const [calculation, setCalculation] = useState(null);\n  const [savedCalculations, setSavedCalculations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\n  const [activeTab, setActiveTab] = useState('calculator');\n\n  useEffect(() => {\n    if (user && activeTab === 'saved') {\n      fetchSavedCalculations();\n    }\n  }, [user, activeTab]);\n\n  const fetchSavedCalculations = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('loan_calculations')\n        .select('*')\n        .eq('user_id', user.id)\n        .eq('saved', true)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setSavedCalculations(data || []);\n    } catch (error) {\n      console.error('Error fetching saved calculations:', error);\n    }\n  };\n\n  const calculateLoan = async () => {\n    if (!calculatorData.loanAmount || !calculatorData.interestRate || !calculatorData.termMonths) {\n      alert('Please fill in all required fields');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      const { data, error } = await supabase\n        .rpc('calculate_loan_payment', {\n          principal: parseFloat(calculatorData.loanAmount),\n          annual_rate: parseFloat(calculatorData.interestRate),\n          term_months: parseInt(calculatorData.termMonths)\n        });\n\n      if (error) throw error;\n\n      const result = data[0];\n      setCalculation({\n        loanAmount: parseFloat(calculatorData.loanAmount),\n        interestRate: parseFloat(calculatorData.interestRate),\n        termMonths: parseInt(calculatorData.termMonths),\n        monthlyPayment: result.monthly_payment,\n        totalInterest: result.total_interest,\n        totalAmount: result.total_amount,\n        loanPurpose: calculatorData.loanPurpose\n      });\n\n    } catch (error) {\n      console.error('Error calculating loan:', error);\n      alert('Error calculating loan: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const saveCalculation = async () => {\n    if (!calculation || !user) return;\n\n    try {\n      const { error } = await supabase\n        .from('loan_calculations')\n        .insert([{\n          user_id: user.id,\n          loan_amount: calculation.loanAmount,\n          interest_rate: calculation.interestRate,\n          term_months: calculation.termMonths,\n          monthly_payment: calculation.monthlyPayment,\n          total_interest: calculation.totalInterest,\n          total_amount: calculation.totalAmount,\n          loan_purpose: calculation.loanPurpose,\n          saved: true,\n          notes: `Calculation for ${formatCurrency(calculation.loanAmount)} loan`\n        }]);\n\n      if (error) throw error;\n\n      // Show success message\n      setShowSuccessMessage(true);\n      \n      // Hide success message after 5 seconds\n      setTimeout(() => {\n        setShowSuccessMessage(false);\n      }, 5000);\n      \n      if (activeTab === 'saved') {\n        fetchSavedCalculations();\n      }\n    } catch (error) {\n      console.error('Error saving calculation:', error);\n      alert('Error saving calculation: ' + error.message);\n    }\n  };\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-KE', {\n      style: 'currency',\n      currency: 'KES',\n      minimumFractionDigits: 0\n    }).format(amount || 0);\n  };\n\n  const formatPercentage = (rate) => {\n    return `${rate}%`;\n  };\n\n  const generateAmortizationSchedule = () => {\n    if (!calculation) return [];\n\n    const schedule = [];\n    let remainingBalance = calculation.loanAmount;\n    const monthlyRate = calculation.interestRate / 100 / 12;\n    const monthlyPayment = calculation.monthlyPayment;\n\n    for (let month = 1; month <= calculation.termMonths; month++) {\n      const interestPayment = remainingBalance * monthlyRate;\n      const principalPayment = monthlyPayment - interestPayment;\n      remainingBalance -= principalPayment;\n\n      schedule.push({\n        month,\n        payment: monthlyPayment,\n        principal: principalPayment,\n        interest: interestPayment,\n        balance: Math.max(0, remainingBalance)\n      });\n    }\n\n    return schedule;\n  };\n\n  const getAffordabilityAdvice = () => {\n    if (!calculation) return null;\n\n    const monthlyPayment = calculation.monthlyPayment;\n    \n    if (monthlyPayment <= 5000) {\n      return {\n        level: 'excellent',\n        color: '#10b981',\n        title: 'Excellent Affordability',\n        description: 'This loan payment fits comfortably within most budgets.'\n      };\n    } else if (monthlyPayment <= 15000) {\n      return {\n        level: 'good',\n        color: '#3b82f6',\n        title: 'Good Affordability',\n        description: 'This payment is manageable for most middle-income earners.'\n      };\n    } else if (monthlyPayment <= 30000) {\n      return {\n        level: 'moderate',\n        color: '#f59e0b',\n        title: 'Moderate Affordability',\n        description: 'Ensure this payment fits within your monthly budget.'\n      };\n    } else {\n      return {\n        level: 'challenging',\n        color: '#ef4444',\n        title: 'Challenging Affordability',\n        description: 'Consider a longer term or smaller amount to reduce payments.'\n      };\n    }\n  };\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"calculator-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>ðŸŽ¯ Loan Calculator</h2>\n          <button className=\"close-btn\" onClick={onClose}>âœ•</button>\n        </div>\n\n        {/* Success Message */}\n        {showSuccessMessage && (\n          <div className=\"success-message\">\n            <div className=\"success-icon\">âœ…</div>\n            <div className=\"success-content\">\n              <h4>Calculation Saved!</h4>\n              <p>Your loan calculation has been saved successfully</p>\n            </div>\n            <button \n              className=\"close-success-btn\" \n              onClick={() => setShowSuccessMessage(false)}\n            >\n              âœ•\n            </button>\n          </div>\n        )}\n\n        <div className=\"calculator-tabs\">\n          <button \n            className={`tab ${activeTab === 'calculator' ? 'active' : ''}`}\n            onClick={() => setActiveTab('calculator')}\n          >\n            ðŸ§® Calculator\n          </button>\n          <button \n            className={`tab ${activeTab === 'results' ? 'active' : ''}`}\n            onClick={() => setActiveTab('results')}\n            disabled={!calculation}\n          >\n            ðŸ“Š Results\n          </button>\n          <button \n            className={`tab ${activeTab === 'saved' ? 'active' : ''}`}\n            onClick={() => setActiveTab('saved')}\n          >\n            ðŸ’¾ Saved\n          </button>\n        </div>\n\n        <div className=\"tab-content\">\n          {activeTab === 'calculator' && (\n            <div className=\"calculator-tab\">\n              <div className=\"calculator-form\">\n                <div className=\"form-group\">\n                  <label>Loan Amount (KES)</label>\n                  <input\n                    type=\"number\"\n                    value={calculatorData.loanAmount}\n                    onChange={(e) => setCalculatorData(prev => ({\n                      ...prev,\n                      loanAmount: e.target.value\n                    }))}\n                    placeholder=\"100,000\"\n                    min=\"1000\"\n                    step=\"1000\"\n                  />\n                </div>\n\n                <div className=\"form-row\">\n                  <div className=\"form-group\">\n                    <label>Interest Rate (%)</label>\n                    <input\n                      type=\"number\"\n                      value={calculatorData.interestRate}\n                      onChange={(e) => setCalculatorData(prev => ({\n                        ...prev,\n                        interestRate: e.target.value\n                      }))}\n                      placeholder=\"12\"\n                      min=\"1\"\n                      max=\"50\"\n                      step=\"0.1\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label>Term (Months)</label>\n                    <select\n                      value={calculatorData.termMonths}\n                      onChange={(e) => setCalculatorData(prev => ({\n                        ...prev,\n                        termMonths: e.target.value\n                      }))}\n                    >\n                      <option value=\"3\">3 months</option>\n                      <option value=\"6\">6 months</option>\n                      <option value=\"12\">12 months</option>\n                      <option value=\"18\">18 months</option>\n                      <option value=\"24\">24 months</option>\n                      <option value=\"36\">36 months</option>\n                      <option value=\"48\">48 months</option>\n                      <option value=\"60\">60 months</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div className=\"form-group\">\n                  <label>Loan Purpose</label>\n                  <select\n                    value={calculatorData.loanPurpose}\n                    onChange={(e) => setCalculatorData(prev => ({\n                      ...prev,\n                      loanPurpose: e.target.value\n                    }))}\n                  >\n                    <option value=\"personal\">Personal</option>\n                    <option value=\"business\">Business</option>\n                    <option value=\"education\">Education</option>\n                    <option value=\"medical\">Medical</option>\n                    <option value=\"home_improvement\">Home Improvement</option>\n                    <option value=\"debt_consolidation\">Debt Consolidation</option>\n                    <option value=\"emergency\">Emergency</option>\n                  </select>\n                </div>\n\n                <button \n                  className=\"calculate-btn\"\n                  onClick={calculateLoan}\n                  disabled={loading}\n                >\n                  {loading ? 'Calculating...' : 'ðŸ§® Calculate Loan'}\n                </button>\n              </div>\n\n              {calculation && (\n                <div className=\"quick-results\">\n                  <h3>Quick Results</h3>\n                  <div className=\"results-grid\">\n                    <div className=\"result-item\">\n                      <div className=\"result-label\">Monthly Payment</div>\n                      <div className=\"result-value\">{formatCurrency(calculation.monthlyPayment)}</div>\n                    </div>\n                    <div className=\"result-item\">\n                      <div className=\"result-label\">Total Interest</div>\n                      <div className=\"result-value\">{formatCurrency(calculation.totalInterest)}</div>\n                    </div>\n                    <div className=\"result-item\">\n                      <div className=\"result-label\">Total Amount</div>\n                      <div className=\"result-value\">{formatCurrency(calculation.totalAmount)}</div>\n                    </div>\n                  </div>\n                  <button className=\"view-details-btn\" onClick={() => setActiveTab('results')}>\n                    View Detailed Results\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'results' && calculation && (\n            <div className=\"results-tab\">\n              <div className=\"results-summary\">\n                <h3>Loan Summary</h3>\n                <div className=\"summary-grid\">\n                  <div className=\"summary-item\">\n                    <div className=\"summary-label\">Loan Amount</div>\n                    <div className=\"summary-value\">{formatCurrency(calculation.loanAmount)}</div>\n                  </div>\n                  <div className=\"summary-item\">\n                    <div className=\"summary-label\">Interest Rate</div>\n                    <div className=\"summary-value\">{formatPercentage(calculation.interestRate)}</div>\n                  </div>\n                  <div className=\"summary-item\">\n                    <div className=\"summary-label\">Term</div>\n                    <div className=\"summary-value\">{calculation.termMonths} months</div>\n                  </div>\n                  <div className=\"summary-item\">\n                    <div className=\"summary-label\">Monthly Payment</div>\n                    <div className=\"summary-value primary\">{formatCurrency(calculation.monthlyPayment)}</div>\n                  </div>\n                  <div className=\"summary-item\">\n                    <div className=\"summary-label\">Total Interest</div>\n                    <div className=\"summary-value\">{formatCurrency(calculation.totalInterest)}</div>\n                  </div>\n                  <div className=\"summary-item\">\n                    <div className=\"summary-label\">Total Amount</div>\n                    <div className=\"summary-value\">{formatCurrency(calculation.totalAmount)}</div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Affordability Assessment */}\n              {(() => {\n                const advice = getAffordabilityAdvice();\n                return advice ? (\n                  <div className=\"affordability-card\" style={{ borderColor: advice.color }}>\n                    <div className=\"affordability-header\">\n                      <h4 style={{ color: advice.color }}>{advice.title}</h4>\n                    </div>\n                    <p>{advice.description}</p>\n                  </div>\n                ) : null;\n              })()}\n\n              {/* Payment Breakdown Chart */}\n              <div className=\"payment-breakdown\">\n                <h4>Payment Breakdown</h4>\n                <div className=\"breakdown-chart\">\n                  <div className=\"chart-bar\">\n                    <div \n                      className=\"principal-portion\"\n                      style={{ \n                        width: `${(calculation.loanAmount / calculation.totalAmount) * 100}%`\n                      }}\n                    >\n                      Principal\n                    </div>\n                    <div \n                      className=\"interest-portion\"\n                      style={{ \n                        width: `${(calculation.totalInterest / calculation.totalAmount) * 100}%`\n                      }}\n                    >\n                      Interest\n                    </div>\n                  </div>\n                  <div className=\"chart-legend\">\n                    <div className=\"legend-item\">\n                      <div className=\"legend-color principal\"></div>\n                      <span>Principal: {formatCurrency(calculation.loanAmount)}</span>\n                    </div>\n                    <div className=\"legend-item\">\n                      <div className=\"legend-color interest\"></div>\n                      <span>Interest: {formatCurrency(calculation.totalInterest)}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Amortization Schedule */}\n              <div className=\"amortization-schedule\">\n                <h4>Payment Schedule (First 12 Months)</h4>\n                <div className=\"schedule-table\">\n                  <div className=\"schedule-header\">\n                    <div>Month</div>\n                    <div>Payment</div>\n                    <div>Principal</div>\n                    <div>Interest</div>\n                    <div>Balance</div>\n                  </div>\n                  {generateAmortizationSchedule().slice(0, 12).map((payment) => (\n                    <div key={payment.month} className=\"schedule-row\">\n                      <div>{payment.month}</div>\n                      <div>{formatCurrency(payment.payment)}</div>\n                      <div>{formatCurrency(payment.principal)}</div>\n                      <div>{formatCurrency(payment.interest)}</div>\n                      <div>{formatCurrency(payment.balance)}</div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"results-actions\">\n                <button className=\"save-btn\" onClick={saveCalculation}>\n                  ðŸ’¾ Save Calculation\n                </button>\n                <button className=\"new-calc-btn\" onClick={() => setActiveTab('calculator')}>\n                  ðŸ§® New Calculation\n                </button>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'saved' && (\n            <div className=\"saved-tab\">\n              <div className=\"saved-header\">\n                <h3>ðŸ’¾ Saved Calculations</h3>\n                <p>Your previously saved loan calculations</p>\n              </div>\n\n              {savedCalculations.length === 0 ? (\n                <div className=\"empty-state\">\n                  <div className=\"empty-icon\">ðŸ’¾</div>\n                  <h3>No Saved Calculations</h3>\n                  <p>Save your loan calculations to compare different scenarios.</p>\n                  <button className=\"new-calc-btn\" onClick={() => setActiveTab('calculator')}>\n                    ðŸ§® Start Calculating\n                  </button>\n                </div>\n              ) : (\n                <div className=\"saved-list\">\n                  {savedCalculations.map((calc) => (\n                    <div key={calc.id} className=\"saved-item\">\n                      <div className=\"saved-header\">\n                        <h4>{formatCurrency(calc.loan_amount)} Loan</h4>\n                        <span className=\"saved-date\">\n                          {new Date(calc.created_at).toLocaleDateString()}\n                        </span>\n                      </div>\n                      <div className=\"saved-details\">\n                        <div className=\"detail-row\">\n                          <span>Monthly Payment:</span>\n                          <strong>{formatCurrency(calc.monthly_payment)}</strong>\n                        </div>\n                        <div className=\"detail-row\">\n                          <span>Term:</span>\n                          <span>{calc.term_months} months</span>\n                        </div>\n                        <div className=\"detail-row\">\n                          <span>Interest Rate:</span>\n                          <span>{formatPercentage(calc.interest_rate)}</span>\n                        </div>\n                        <div className=\"detail-row\">\n                          <span>Total Interest:</span>\n                          <span>{formatCurrency(calc.total_interest)}</span>\n                        </div>\n                      </div>\n                      <div className=\"saved-actions\">\n                        <button \n                          className=\"load-btn\"\n                          onClick={() => {\n                            setCalculatorData({\n                              loanAmount: calc.loan_amount.toString(),\n                              interestRate: calc.interest_rate.toString(),\n                              termMonths: calc.term_months.toString(),\n                              loanPurpose: calc.loan_purpose || 'personal'\n                            });\n                            setCalculation({\n                              loanAmount: calc.loan_amount,\n                              interestRate: calc.interest_rate,\n                              termMonths: calc.term_months,\n                              monthlyPayment: calc.monthly_payment,\n                              totalInterest: calc.total_interest,\n                              totalAmount: calc.total_amount,\n                              loanPurpose: calc.loan_purpose\n                            });\n                            setActiveTab('results');\n                          }}\n                        >\n                          ðŸ“Š View Details\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        <style>{`\n          .calculator-modal {\n            background: white;\n            border-radius: 24px;\n            max-width: 900px;\n            width: 90vw;\n            max-height: 90vh;\n            overflow: hidden;\n            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);\n            border: 1px solid #e2e8f0;\n          }\n\n          .calculator-tabs {\n            display: flex;\n            background: #f8fafc;\n            border-bottom: 1px solid #e2e8f0;\n            padding: 0.5rem;\n          }\n\n          .tab {\n            flex: 1;\n            background: none;\n            border: none;\n            padding: 1rem;\n            font-weight: 600;\n            color: #64748b;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            border-radius: 12px;\n            font-size: 0.9rem;\n          }\n\n          .tab:hover:not(:disabled) {\n            background: rgba(59, 130, 246, 0.1);\n            color: #3b82f6;\n          }\n\n          .tab.active {\n            background: white;\n            color: #3b82f6;\n            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);\n          }\n\n          .tab:disabled {\n            opacity: 0.5;\n            cursor: not-allowed;\n          }\n\n          .tab-content {\n            padding: 2rem;\n            max-height: 60vh;\n            overflow-y: auto;\n          }\n\n          .calculator-form {\n            max-width: 500px;\n            margin: 0 auto;\n          }\n\n          .form-group {\n            margin-bottom: 1.5rem;\n          }\n\n          .form-row {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 1rem;\n          }\n\n          .form-group label {\n            display: block;\n            font-weight: 700;\n            color: #1f2937;\n            margin-bottom: 0.75rem;\n            font-size: 0.95rem;\n            letter-spacing: 0.025em;\n          }\n\n          .form-group input,\n          .form-group select {\n            width: 100%;\n            padding: 1.25rem;\n            border: 2px solid #e5e7eb;\n            border-radius: 12px;\n            font-size: 1.1rem;\n            font-weight: 500;\n            color: #1f2937;\n            background: #ffffff;\n            transition: all 0.2s ease;\n            min-height: 56px;\n            box-sizing: border-box;\n          }\n          \n          .form-group input::placeholder {\n            color: #9ca3af;\n            font-weight: 400;\n            opacity: 0.8;\n          }\n\n          .form-group input:focus,\n          .form-group select:focus {\n            outline: none;\n            border-color: #3b82f6;\n            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15);\n            background: #fefefe;\n            color: #111827;\n          }\n          \n          .form-group input:hover,\n          .form-group select:hover {\n            border-color: #6b7280;\n            background: #fefefe;\n          }\n\n          .calculate-btn {\n            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n            color: white;\n            border: none;\n            border-radius: 12px;\n            padding: 1rem 2rem;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            width: 100%;\n            font-size: 1rem;\n            margin-bottom: 2rem;\n          }\n\n          .calculate-btn:hover:not(:disabled) {\n            transform: translateY(-2px);\n            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);\n          }\n\n          .calculate-btn:disabled {\n            opacity: 0.6;\n            cursor: not-allowed;\n          }\n\n          .quick-results {\n            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n            border: 1px solid #bae6fd;\n            border-radius: 16px;\n            padding: 2rem;\n            text-align: center;\n          }\n\n          .quick-results h3 {\n            color: #1e40af;\n            margin-bottom: 1.5rem;\n          }\n\n          .results-grid {\n            display: grid;\n            grid-template-columns: repeat(3, 1fr);\n            gap: 1rem;\n            margin-bottom: 1.5rem;\n          }\n\n          .result-item {\n            background: white;\n            border-radius: 12px;\n            padding: 1rem;\n            border: 1px solid #bae6fd;\n          }\n\n          .result-label {\n            font-size: 0.875rem;\n            color: #64748b;\n            margin-bottom: 0.5rem;\n            font-weight: 600;\n          }\n\n          .result-value {\n            font-size: 1.25rem;\n            font-weight: 700;\n            color: #1e40af;\n          }\n\n          .view-details-btn {\n            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);\n            color: white;\n            border: none;\n            border-radius: 12px;\n            padding: 0.75rem 1.5rem;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.2s ease;\n          }\n\n          .view-details-btn:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);\n          }\n\n          .results-summary {\n            margin-bottom: 2rem;\n          }\n\n          .results-summary h3 {\n            color: #374151;\n            margin-bottom: 1.5rem;\n            text-align: center;\n          }\n\n          .summary-grid {\n            display: grid;\n            grid-template-columns: repeat(3, 1fr);\n            gap: 1rem;\n            margin-bottom: 2rem;\n          }\n\n          .summary-item {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 12px;\n            padding: 1.5rem;\n            text-align: center;\n          }\n\n          .summary-label {\n            font-size: 0.875rem;\n            color: #64748b;\n            margin-bottom: 0.5rem;\n            font-weight: 600;\n          }\n\n          .summary-value {\n            font-size: 1.25rem;\n            font-weight: 700;\n            color: #1e293b;\n          }\n\n          .summary-value.primary {\n            color: #3b82f6;\n            font-size: 1.5rem;\n          }\n\n          .affordability-card {\n            background: #f8fafc;\n            border: 2px solid;\n            border-radius: 12px;\n            padding: 1.5rem;\n            margin-bottom: 2rem;\n          }\n\n          .affordability-header h4 {\n            margin-bottom: 0.5rem;\n            font-size: 1.125rem;\n          }\n\n          .affordability-card p {\n            margin: 0;\n            color: #64748b;\n            line-height: 1.6;\n          }\n\n          .payment-breakdown {\n            margin-bottom: 2rem;\n          }\n\n          .payment-breakdown h4 {\n            color: #374151;\n            margin-bottom: 1rem;\n          }\n\n          .breakdown-chart {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 12px;\n            padding: 1.5rem;\n          }\n\n          .chart-bar {\n            display: flex;\n            height: 40px;\n            border-radius: 8px;\n            overflow: hidden;\n            margin-bottom: 1rem;\n          }\n\n          .principal-portion {\n            background: #3b82f6;\n            color: white;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-weight: 600;\n            font-size: 0.875rem;\n          }\n\n          .interest-portion {\n            background: #f59e0b;\n            color: white;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-weight: 600;\n            font-size: 0.875rem;\n          }\n\n          .chart-legend {\n            display: flex;\n            gap: 2rem;\n            justify-content: center;\n          }\n\n          .legend-item {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            font-size: 0.875rem;\n            color: #64748b;\n          }\n\n          .legend-color {\n            width: 16px;\n            height: 16px;\n            border-radius: 4px;\n          }\n\n          .legend-color.principal {\n            background: #3b82f6;\n          }\n\n          .legend-color.interest {\n            background: #f59e0b;\n          }\n\n          .amortization-schedule {\n            margin-bottom: 2rem;\n          }\n\n          .amortization-schedule h4 {\n            color: #374151;\n            margin-bottom: 1rem;\n          }\n\n          .schedule-table {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 12px;\n            overflow: hidden;\n          }\n\n          .schedule-header {\n            display: grid;\n            grid-template-columns: repeat(5, 1fr);\n            background: #e2e8f0;\n            padding: 1rem;\n            font-weight: 700;\n            color: #374151;\n            font-size: 0.875rem;\n          }\n\n          .schedule-row {\n            display: grid;\n            grid-template-columns: repeat(5, 1fr);\n            padding: 0.75rem 1rem;\n            border-bottom: 1px solid #e2e8f0;\n            font-size: 0.875rem;\n            color: #64748b;\n          }\n\n          .schedule-row:last-child {\n            border-bottom: none;\n          }\n\n          .results-actions {\n            display: flex;\n            gap: 1rem;\n            justify-content: center;\n          }\n\n          .save-btn,\n          .new-calc-btn {\n            padding: 1rem 2rem;\n            border: none;\n            border-radius: 12px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            font-size: 1rem;\n          }\n\n          .save-btn {\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n            color: white;\n          }\n\n          .new-calc-btn {\n            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\n            color: white;\n          }\n\n          .save-btn:hover,\n          .new-calc-btn:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);\n          }\n\n          .saved-header {\n            text-align: center;\n            margin-bottom: 2rem;\n          }\n\n          .saved-header h3 {\n            color: #374151;\n            margin-bottom: 0.5rem;\n          }\n\n          .saved-header p {\n            color: #6b7280;\n          }\n\n          .empty-state {\n            text-align: center;\n            padding: 3rem 1rem;\n          }\n\n          .empty-icon {\n            font-size: 4rem;\n            margin-bottom: 1rem;\n            opacity: 0.5;\n          }\n\n          .empty-state h3 {\n            color: #374151;\n            margin-bottom: 0.5rem;\n          }\n\n          .empty-state p {\n            color: #6b7280;\n            margin-bottom: 2rem;\n          }\n\n          .saved-list {\n            display: flex;\n            flex-direction: column;\n            gap: 1rem;\n          }\n\n          .saved-item {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 12px;\n            padding: 1.5rem;\n          }\n\n          .saved-item .saved-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 1rem;\n            text-align: left;\n          }\n\n          .saved-item h4 {\n            color: #374151;\n            margin: 0;\n          }\n\n          .saved-date {\n            font-size: 0.875rem;\n            color: #64748b;\n          }\n\n          .saved-details {\n            display: grid;\n            gap: 0.5rem;\n            margin-bottom: 1rem;\n          }\n\n          .detail-row {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            font-size: 0.875rem;\n          }\n\n          .detail-row span:first-child {\n            color: #64748b;\n          }\n\n          .detail-row strong {\n            color: #3b82f6;\n            font-weight: 700;\n          }\n\n          .saved-actions {\n            display: flex;\n            justify-content: flex-end;\n          }\n\n          .load-btn {\n            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            padding: 0.5rem 1rem;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            font-size: 0.875rem;\n          }\n\n          .load-btn:hover {\n            transform: translateY(-1px);\n            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);\n          }\n\n          @media (max-width: 768px) {\n            .calculator-modal {\n              width: 95vw;\n              max-height: 95vh;\n            }\n\n            .tab-content {\n              padding: 1rem;\n            }\n\n            .form-row {\n              grid-template-columns: 1fr;\n            }\n\n            .results-grid,\n            .summary-grid {\n              grid-template-columns: 1fr;\n            }\n\n            .chart-legend {\n              flex-direction: column;\n              align-items: center;\n              gap: 1rem;\n            }\n\n            .schedule-header,\n            .schedule-row {\n              grid-template-columns: repeat(3, 1fr);\n              font-size: 0.75rem;\n            }\n\n            .schedule-header div:nth-child(3),\n            .schedule-header div:nth-child(4),\n            .schedule-row div:nth-child(3),\n            .schedule-row div:nth-child(4) {\n              display: none;\n            }\n\n            .results-actions {\n              flex-direction: column;\n            }\n\n            .saved-item .saved-header {\n              flex-direction: column;\n              align-items: flex-start;\n              gap: 0.5rem;\n            }\n          }\n        `}</style>\n      </div>\n    </div>\n  );\n};\n\nexport default LoanCalculator;"],"names":["LoanCalculator","onClose","user","useAuth","calculatorData","setCalculatorData","useState","calculation","setCalculation","savedCalculations","setSavedCalculations","loading","setLoading","showSuccessMessage","setShowSuccessMessage","activeTab","setActiveTab","useEffect","fetchSavedCalculations","data","error","supabase","calculateLoan","result","saveCalculation","formatCurrency","amount","formatPercentage","rate","generateAmortizationSchedule","schedule","remainingBalance","monthlyRate","monthlyPayment","month","interestPayment","principalPayment","getAffordabilityAdvice","jsx","jsxs","e","prev","advice","payment","calc"],"mappings":"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;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA,CA8iBN,CAAA,CAAA,CACJ,CAAA,CACF,CAEJ"}